<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Experiment: Exploring Spatial Distribution of Traffic Collisions in Toronto, ON, Canada</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="experiment-2024-01-25_files/libs/clipboard/clipboard.min.js"></script>
<script src="experiment-2024-01-25_files/libs/quarto-html/quarto.js"></script>
<script src="experiment-2024-01-25_files/libs/quarto-html/popper.min.js"></script>
<script src="experiment-2024-01-25_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="experiment-2024-01-25_files/libs/quarto-html/anchor.min.js"></script>
<link href="experiment-2024-01-25_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="experiment-2024-01-25_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="experiment-2024-01-25_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="experiment-2024-01-25_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="experiment-2024-01-25_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="experiment-2024-01-25_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="experiment-2024-01-25_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="experiment-2024-01-25_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="experiment-2024-01-25_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="experiment-2024-01-25_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="experiment-2024-01-25_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="experiment-2024-01-25_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="experiment-2024-01-25_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="experiment-2024-01-25_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="experiment-2024-01-25_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Experiment: Exploring Spatial Distribution of Traffic Collisions in Toronto, ON, Canada</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Richard Wen<br>
rrwen.dev@gmail.com<br>
Saturday, January 25, 2025</p>
<section id="libraries" class="level1">
<h1>Libraries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggspatial)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>City boundaries downloaded from https://open.toronto.ca/dataset/regional-municipal-boundary/ (last updated December 7, 2019).</p>
<p>All collisions data (2010-2022) was provided by David McElroy <a href="mailto:David.McElroy@toronto.ca" class="email">David.McElroy@toronto.ca</a> from the City of Toronto on November 7, 2024.</p>
<p>Verified bikeways data (2001 to 2022) originally downloaded by Konrad Samsel <a href="mailto:konrad.samsel@mail.utoronto.ca" class="email">konrad.samsel@mail.utoronto.ca</a> in January 2023 based on Toronto Cycling Network data (<a href="https://open.toronto.ca/dataset/cycling-network/">url</a>), and last updated by Konrad on March 25, 2024. This data was later modified by Richard Wen <a href="mailto:richard.wen@utoronto.ca" class="email">richard.wen@utoronto.ca</a>, and was last updated October 27, 2024.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load toronto city bounds</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>bounds_raw <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"../../data/toronto-boundary-2019-07-23/citygcs_regional_mun_wgs84.shp"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load toronto bikeways data</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>bike_raw <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"../../data/toronto-bikeways-2024-12-16.geojson"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all toronto collisions from 2022 to 2024</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>crash_raw <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"../../tmp/i0327_collisionsrep_acc_export.csv"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">c</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"X_POSSIBLE_NAMES=LONGITUDE"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Y_POSSIBLE_NAMES=LATITUDE"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">crs =</span> <span class="dv">4326</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="city-boundaries" class="level2">
<h2 class="anchored" data-anchor-id="city-boundaries">City Boundaries</h2>
<p>Preview city boundaries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_spatial</span>(bounds_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="experiment-2024-01-25_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="bikeways" class="level2">
<h2 class="anchored" data-anchor-id="bikeways">Bikeways</h2>
<p>Preview the first 50 rows of the bikeways data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bike_raw <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    as_tibble <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    datatable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-aadcaf6a93fb9289297a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-aadcaf6a93fb9289297a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["8","17","18","19","38","39","40","41","42","43","44","69","70","71","72","73","74","75","90","237","241","274","275","276","277","317","318","319","320","321","322","323","396","397","398","399","400","402","403","404","406","407","408","430","431","471","481","485","486","487"],["Bloor St E","Lake Shore Blvd W","Lake Shore Blvd W","Lake Shore Blvd W","Queens Quay W","Davenport Rd","Elizabeth St","Gerrard St E","Macpherson Ave","Lake Shore Blvd W","Lake Shore Blvd W","Boulton Dr","Poplar Plains Rd","Leaside Bdge","Pape Ave","Poplar Plains Rd","Prince Arthur Ave","Steeles Ave E","Lake Shore Blvd W","Colborne Lodge Dr","Millwood Rd","Millwood Rd","Royal York Rd","Royal York Rd","Sherbourne St N","Bedford Rd","Poplar Plains Rd","Bay St","Bayview Ave","Davenport Rd","Davenport Rd","Jones Ave","Boulton Dr","Grace St","Russell Hill Rd","St George St","St George St","College St","Davenport Rd","Davenport Rd","Gerrard St E","Gerrard St W","Lake Shore Blvd W","Steeles Ave E","Steeles Ave E","West Rd","Sherbourne St","Remembrance Dr","Harbord St","Wellesley St E"],["Parliament St","Humber Bay Park Rd W","37 M E Fleeceline Rd","50.7 M E Louisa St","Martin Goodman Trl","Cottingham Rd","College St","Yonge St","Davenport Rd","Marine Parade Dr","157.4 M S/W Marine Parade Dr","Cottingham Rd","Boulton Dr","Millwood Rd","Hopedale Ave","Cottingham Rd","St George St","210.8 M W Beare Rd","43.4 M N Shore Breeze Dr","The Queensway","22.1 M W Hepc","Leaside Bdge","Eglinton Ave West Trl","Braecrest Ave","Maple Ave","Davenport Rd","St Clair Ave W","Davenport Rd","400 M S  Arjay Cres","Macpherson Ave","Bedford Rd","Gerrard St E","Russel Hill Rd","Bloor St W","St Clair Ave W","Dupont St","Lowther Ave","Manning Ave","Old Weston Rd","Madison Ave","River St","Bay St","Brown's Line","143.5 M W Milliken Park Trl","Beare Rd","High Park Trl","Bloor St E","Lake Shore Blvd W","Ossignton Ave","Yonge St"],["Castle Frank Rd","Humber Bay Park East Trl","Humber Bay Park Rd W","37 M E Fleeceline Rd","Bathurst St","Macpherson Ave","Gerrard St W","Church St","Poplar Plains Rd","Palace Pier Crt","Marine Parade Dr","Poplar Plains Rd","Macpherson Ave","Donlands Ave","Donlands Ave","Boulton Dr","Bedford Rd","Beare Rd","157.4 M S/W Marine Parade Dr","Lake Shore Blvd W","83.8 M E Hepc","83.8 M E Hepc","Ashley Park Rd","La Rose Ave","Bloor St E","Prince Arthur Ave","Cottingham Rd","Yorkville Ave","42.2 M N St Leonard's Ave","Bedford Rd","Blackmore St","Queen St E","Cottingham Rd","Harbord St","Boulton Dr","Lowther Ave","College St","Bay St","Foundry Ave","Cottingham Rd","Blackburn St","Yonge St","Twenty Second St","Markham Rd","Scarborough Pickering Town Line","Colborne Lodge Dr","Front St E","Martin Goodman Trl","St. George St","Sherbourne St"],["Major Arterial","Major Arterial","Major Arterial","Major Arterial","Collector","Minor Arterial","Collector","Minor Arterial","Collector","Major Arterial","Major Arterial","Collector","Collector","Major Arterial","Major Arterial","Collector","Local","Minor Arterial","Major Arterial","Collector","Major Arterial","Major Arterial","Minor Arterial","Minor Arterial","Collector","Minor Arterial","Collector","Major Arterial","Major Arterial","Major Arterial","Major Arterial","Collector","Collector","Collector","Collector","Minor Arterial","Minor Arterial","Major Arterial","Minor Arterial","Minor Arterial","Minor Arterial","Minor Arterial","Major Arterial","Major Arterial","Minor Arterial","Other","Minor Arterial","Major Arterial","Minor Arterial","Minor Arterial"],["Arterial","Arterial","Arterial","Arterial","Collector","Arterial","Collector","Arterial","Collector","Arterial","Arterial","Collector","Collector","Arterial","Arterial","Collector","Local","Arterial","Arterial","Collector","Arterial","Arterial","Arterial","Arterial","Collector","Arterial","Collector","Arterial","Arterial","Arterial","Arterial","Collector","Collector","Collector","Collector","Arterial","Arterial","Arterial","Arterial","Arterial","Arterial","Arterial","Arterial","Arterial","Arterial","Local","Arterial","Arterial","Arterial","Arterial"],[2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001,2001],["Cycle Track","Bike Lane","Bike Lane","Bike Lane","Bi-Directional Cycle Track","Bike Lane","Bike Lane","Cycle Track","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane - Buffered","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Bike Lane","Cycle Track","Bike Lane","Bike Lane","Bike Lane - Buffered","Bike Lane","Cycle Track","Bike Lane","Cycle Track","Cycle Track"],[2001,2015,2015,2015,2009,2007,2007,2007,2007,2016,2016,2001,2007,2009,2009,2007,2009,2009,2016,2009,2013,2013,2007,2009,2009,2007,2009,2007,2007,2009,2007,2007,2001,2007,2007,2007,2007,2009,2009,2007,2007,2007,2007,2007,2009,2007,2009,2014,2007,2009],["Pre-2007",null,null,null,"Pre-2009","Pre-2007","pre Sep 2007","pre Sep 2007","pre Sep 2007","May-Nov 2016","May -Nov 2016","Pre-2007","pre Sep 2007","Pre-2009","Pre-2009","pre Sep 2007","Pre-2009","pre 2009",null,"Pre-2009",null,null,"Pre-2007","Pre-2009","Pre 2009","pre Sep 2007","Pre-2009","pre Sep 2007","pre-2007","Pre-2009","Pre-2007","pre Sep 2007","Pre-2007","pre Sep 2007","pre-2007","Pre-2007","Pre-2007","Pre-2009","Sep 2007 - Jun 2009*","Pre-2007","pre Sep 2007","pre Sep 2007","pre Sep 2007","pre 2007","pre 2009","pre-2007","Pre 2009",null,"pre Sep 2007","pre-2009"],["PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","BUF","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","BUF","PL","PL","PL","PL","PL"],["PL pre-2007: https://www.google.com/maps/@43.6732319,-79.3691049,3a,73.2y,34.74h,68.32t/data=!3m7!1e1!3m5!1sIeyGJnhiM9mjkcs1xqxhcw!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Painted Lane: https://www.google.com/maps/@43.621083,-79.4826483,3a,75y,18.21h,88.06t/data=!3m8!1e1!3m6!1sMJB-vJon4smvO7A8Tb2NNw!2e0!5s20220901T000000!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fpanoid%3DMJB-vJon4smvO7A8Tb2NNw%26c","Painted Lane: https://www.google.com/maps/@43.6201075,-79.4846658,3a,31.3y,211.17h,85.44t/data=!3m6!1e1!3m4!1sxO8W_BI06yA9H8FYkYAghg!2e0!7i16384!8i8192?entry=ttu","Painted Lane: https://www.google.com/maps/@43.6196279,-79.4857963,3a,15y,205.44h,86.9t/data=!3m7!1e1!3m5!1slrn3URS1G-Fez-2ASS3zaA!2e0!5s20150401T000000!7i13312!8i6656?entry=ttu","PL installed pre-2009: https://www.google.com/maps/@43.63534,-79.3990609,3a,15y,225.88h,84.26t/data=!3m7!1e1!3m5!1sJ338-CmunvB2s-k6txkoLw!2e0!5s20090601T000000!7i13312!8i6656?entry=ttu","Pre 2007: https://www.google.com/maps/@43.6770247,-79.4040806,3a,75y,310.25h,80.44t/data=!3m7!1e1!3m5!1s0KrfdmVrlUaFf0m53QLkqg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL pre 2007: SV (https://www.google.com/maps/@43.6590912,-79.3867923,3a,75y,188.22h,75.73t/data=!3m7!1e1!3m5!1swPgZ-4pECz8BtPGmZypapg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu), no changes since.","Sep 2007 SV: https://www.google.com/maps/@43.6598749,-79.3785605,3a,48.8y,254.66h,88.15t/data=!3m7!1e1!3m5!1sxjtGBvbrgBUQuOOZc2gEnw!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Sep 2007 road signage SV: https://www.google.ca/maps/@43.6768119,-79.4030195,3a,68.4y,223.41h,75.29t/data=!3m7!1e1!3m5!1sVPgCXa6EUs9XPJXGZ42FaQ!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL installed between May 2016 and Jul 2017: https://www.google.com/maps/@43.6312765,-79.4755769,3a,74.2y,254.69h,75.11t/data=!3m7!1e1!3m5!1sOefku060PZkmjXyvFMRa6Q!2e0!5s20170701T000000!7i13312!8i6656?entry=ttu. No upgrades since. Likely May - Nov based o","Designated PL between May and Nov 2016: https://www.google.com/maps/@43.6299386,-79.4772999,3a,64.7y,351h,78.04t/data=!3m7!1e1!3m5!1sTv3TdTe5MQojYJXHEmJGwg!2e0!5s20160501T000000!7i13312!8i6656?entry=ttu, no upgrades since","See UPGR COMMENTS, PL installed pre-2007, no changes in type since.","Sep 2007 SV: https://www.google.ca/maps/@43.6769766,-79.4028037,3a,75y,2.28h,72.01t/data=!3m7!1e1!3m5!1sgJREgcXifbrOxf_3FMZqvA!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL installed pre-2009, no upgrade since: https://www.google.com/maps/@43.6988833,-79.3502006,3a,15y,197.74h,84.54t/data=!3m7!1e1!3m5!1sY0v2HBrEtay_f7XIoDM7Aw!2e0!5s20090401T000000!7i13312!8i6656?entry=ttu","PL Pre-2009: https://www.google.com/maps/@43.6970376,-79.3494214,3a,28.8y,200.05h,79.03t/data=!3m7!1e1!3m5!1s2WbN3teIrvDEdEhpHrXvcQ!2e0!5s20090401T000000!7i13312!8i6656?entry=ttu","Sep 2007 SV: https://www.google.ca/maps/@43.6780556,-79.403141,3a,75y,356.25h,76.3t/data=!3m7!1e1!3m5!1sdvKnYEsrm4W8xv_-uhMDBA!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu'","PL Pre-2009: https://www.google.com/maps/@43.6690151,-79.3989086,3a,43.6y,250.17h,83.1t/data=!3m7!1e1!3m5!1sJRdrddVkUoAl1y7r-AIzvA!2e0!5s20090701T000000!7i13312!8i6656?entry=ttu","PL (BUF) installed pre 2009, see signs duiring this time, no upgrades since: https://www.google.com/maps/@43.8526715,-79.1819709,3a,26.1y,244.92h,84.09t/data=!3m7!1e1!3m5!1sUU02UOMaZ6z9bsq_Xcfa0g!2e0!5s20090501T000000!7i13312!8i6656?entry=ttu","Painted Lane: https://www.google.com/maps/@43.6269549,-79.4793084,3a,40.9y,96.58h,81.25t/data=!3m8!1e1!3m6!1sL1mNXpsItQJ2T3z6bACq0w!2e0!5s20220901T000000!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fpanoid%3DL1mNXpsItQJ2T3z6bACq0w%","(k) existed pre-2009 as a PL: https://www.google.com/maps/@43.638354,-79.4591583,3a,42.5y,116.01h,79.89t/data=!3m7!1e1!3m5!1sOJOij60I6c4va19M6wPkMw!2e0!5s20090601T000000!7i13312!8i6656?entry=ttu","Road diamonds added around 2013","PL installed, seen around 2013 on sat imagery.","Sep 2007 SV: https://www.google.com/maps/@43.6656398,-79.5194797,3a,75y,157h,82.19t,0r/data=!3m7!1e1!3m5!1sQ8IGtw246WITKGnsomNWjg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL installed pre-2009, no upgrades since: https://www.google.com/maps/@43.6914509,-79.53057,3a,15y,349.31h,83.25t/data=!3m7!1e1!3m5!1sPx1fAnif57itwfbM1xbUFg!2e0!5s20090501T000000!7i13312!8i6656?entry=ttu","Majority PL over BUF, Pre 2009, no upgr, https://www.google.com/maps/@43.6746402,-79.3776448,3a,15y,327.74h,83.76t/data=!3m7!1e1!3m5!1sZSm80jQf6OlX9sSADtShdQ!2e0!5s20090401T000000!7i13312!8i6656?entry=ttu","Sep 2007 SV: https://www.google.com/maps/@43.6694542,-79.3979482,3a,75y,150.35h,64.62t/data=!3m7!1e1!3m5!1sriLMfTokUY49vMKo4tCLxg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL PRE 2009: https://www.google.com/maps/@43.6820097,-79.4021319,3a,15.6y,350.55h,76.8t/data=!3m7!1e1!3m5!1sbT1wr2au55J5jQubXVapQQ!2e0!5s20090501T000000!7i13312!8i6656?entry=ttu . No upgrades since.","Sep 2007 SV: https://www.google.com/maps/@43.6723239,-79.3905201,3a,75y,118.08h,65.78t/data=!3m7!1e1!3m5!1sH_stCfY4vQcaiDN2ZIw7PQ!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu",null,"May 2009 SV: https://www.google.com/maps/@43.6766889,-79.4030376,3a,75y,179.49h,62.93t/data=!3m7!1e1!3m5!1s7bGX57Cmbn68gbblHN0ndQ!2e0!5s20090501T000000!7i13312!8i6656?entry=ttu","PL pre 2007: https://www.google.com/maps/@43.6747949,-79.3959458,3a,76.4y,68.55h,84.24t/data=!3m7!1e1!3m5!1sWe_YVnBtFe-n0pZ5oQXNzA!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Sep 2007 SV: https://www.google.com/maps/@43.6691769,-79.335585,3a,75y,177.86h,83.39t/data=!3m7!1e1!3m5!1sIffBfGoP2upvNUAI6WMwew!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","See UPGR COMMENTS, PL since pre-2007, no changes in type since: https://www.google.com/maps/@43.6797015,-79.4039542,3a,75y,345.53h,84.27t/data=!3m7!1e1!3m5!1sq8TlqUQkY_lilrmtPk1OuQ!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Sep 2007 SV: https://www.google.com/maps/@43.6632345,-79.418739,3a,46.5y,166.67h,87.28t/data=!3m7!1e1!3m5!1sEGwCsmb4g6XpbI5ieRAdhg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","SV Sep 2007: https://www.google.com/maps/@43.6814679,-79.4057042,3a,90y,124.42h,78.54t/data=!3m7!1e1!3m5!1slMbBQ3zqUcpqh8pvMxRHYw!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL pre 2007 no upgrades since: https://www.google.com/maps/@43.6730045,-79.402183,3a,49.8y,162.97h,78.84t/data=!3m7!1e1!3m5!1sjs2TzRpMDxx9b0YkCu493g!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL pre 2007 no upgrades since: https://www.google.com/maps/@43.6638275,-79.3983122,3a,75y,135.96h,70.84t/data=!3m7!1e1!3m5!1sbRsf6msgpy5pVVsyT5E9zg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","(K- PL along segment, disregard majority comment) PL* type about 50% of street segment, None (sharrows) on other 50% of segment; Imagery observation: PL on College St from Bay St to Manning Ave and from Lansdowne Ave to Dundas St. W ; Sharrows on College",null,"Sep 2007 SV: https://www.google.com/maps/@43.6777693,-79.4069575,3a,48.7y,79.88h,73.8t/data=!3m7!1e1!3m5!1sZcnyVe4oHoDQQdGG5_bhBQ!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Sep 2007 SV: https://www.google.com/maps/@43.6646597,-79.3556234,3a,75y,250.74h,68.03t/data=!3m7!1e1!3m5!1s6HkQrxeLHAhoccpExrxjWw!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu",null,"Sep 2007 SV: https://www.google.com/maps/@43.5932537,-79.5386475,3a,49.4y,74.41h,74.02t/data=!3m7!1e1!3m5!1s0_bufGhbF0yoFLDRoZbKhQ!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL installed pre 2007, see signs duiring this time, no upgrades since: https://www.google.com/maps/@43.8345509,-79.2606351,3a,32.8y,246.53h,79.15t/data=!3m7!1e1!3m5!1sFe7Vm6AnB_gwD6sNgK6JAw!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL (BUF) installed pre 2009, see signs duiring this time, no upgrades since: https://www.google.com/maps/@43.8547036,-79.1734155,3a,28.1y,353.61h,80.53t/data=!3m7!1e1!3m5!1s-Prgq8OBR3ymkWmvXNtw1Q!2e0!5s20090501T000000!7i13312!8i6656?entry=ttu","SV Sep 2007: https://www.google.com/maps/@43.652035,-79.4657077,3a,75y,211.71h,78.42t/data=!3m7!1e1!3m5!1sNITH9fx5amm6mR5kpuHNWg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","PL pre 2009, later upgraded, https://www.google.com/maps/@43.6601479,-79.3717699,3a,75y,135.22h,60.75t/data=!3m7!1e1!3m5!1swEYCms_IkcId7OeZE37VEA!2e0!5s20090701T000000!7i13312!8i6656?entry=ttu","PL: https://www.google.com/maps/@43.6344643,-79.4086283,3a,75y,261.82h,73.29t/data=!3m7!1e1!3m5!1sIauI9pWhcv0i6AvWxZIHYg!2e0!5s20150901T000000!7i13312!8i6656?entry=ttu","SEP 2007 SV: https://www.google.ca/maps/@43.6585439,-79.4241322,3a,75y,61.37h,69.87t/data=!3m7!1e1!3m5!1sLqTiGq-iurqfB93yxGZNBg!2e0!5s20070901T000000!7i3328!8i1664?entry=ttu","Jul 2009 SV: https://www.google.com/maps/@43.6651586,-79.3833857,3a,75y,69.27h,86.12t/data=!3m7!1e1!3m5!1sks2V3kEakkA5BbYHZVWsyQ!2e0!5s20090701T000000!7i13312!8i6656?entry=ttu"],[2021,null,null,null,2015,2016,2016,2017,null,null,null,2016,null,null,null,null,null,null,null,2021,null,null,null,null,null,null,null,null,null,null,2022,null,2019,null,null,null,null,null,2020,null,null,2020,null,null,null,null,2013,null,2014,2014],["23-Sep-21",null,null,null,"April-Sept 2015",null,null,"Oct 2016 - Mar 2017",null,null,null,"Can't find- google maps",null,null,null,null,null,null,null,"Jun-July 2021",null,null,null,null,null,null,null,null,null,null,"Mid October, 2022",null,"Can't find- google maps",null,null,null,null,null,null,null,null,"18-Dec-20",null,null,null,null,null,null,null,"Jan - May 2014"],["PBL",null,null,null,"PBL","PL","PL","PBL",null,null,null,"PL",null,null,null,null,null,null,null,"BUF",null,null,null,null,null,null,null,null,null,null,"PBL",null,"PL",null,null,null,null,null,"PL",null,null,"PBL",null,null,null,null,"PBL",null,"BUF","PBL"],["PBL upgraded between 2020 and 2021: https://www.google.com/maps/@43.673219,-79.3690773,3a,75y,86.14h,69.73t/data=!3m8!1e1!3m6!1smj8wDk_FuuwipmwuE2JpSA!2e0!5s20210901T000000!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fpanoid%3Dmj8w",null,null,null,"PBL upgrade April - Sept 2015: https://www.google.com/maps/@43.6353629,-79.3989952,3a,75y,198.7h,75.12t/data=!3m7!1e1!3m5!1sC257_w9mzx1B9p4M8lMhnw!2e0!5s20150901T000000!7i13312!8i6656?entry=ttu","K- no changes since.",null,"Aug 2017 SV: https://www.google.com/maps/@43.6591769,-79.3814749,3a,75y,67.93h,85.83t/data=!3m7!1e1!3m5!1s_bREbvRxkksltpbzRZaFbg!2e0!5s20170801T000000!7i13312!8i6656?entry=ttu","No infrastructure type upgrade, PL was improved with extended lines (Jun2013-May2014) and green paint around curbs (May2016-Aug2017)",null,null,"PL since before 2007; INFR_NO CHANGE","No infrastructure type upgrade, PL was improved with extended lines and addition of road markings and green paint",null,null,"No infrastructure type upgrade, PL was improved with extended lines and addition of road markings",null,null,null,"Seen as PL up to June 2021, on google earth see upgraded to BUF in July 2021.",null,null,"No upgrades; SV Oct 2021: https://www.google.com/maps/@43.6658753,-79.5195007,3a,75y,335.99h,74.44t/data=!3m7!1e1!3m5!1sBZ2zwxCQVmhYCGXpk3_72g!2e0!5s20211001T000000!7i16384!8i8192?entry=ttu",null,null,null,null,null,null,null,"PBL as determined through construction notice: https://www.toronto.ca/wp-content/uploads/2022/08/94e1-6-CPP-Installation-NoticeDavenportPhase2-FinalUpdateAODA.pdf",null,"PL since before 2007; INFR_NO CHANGE; fixed painting; https://www.google.com/maps/@43.679489,-79.4040275,3a,75y,178.61h,58.06t/data=!3m7!1e1!3m5!1sEfTxCS4GKOlr5lKTT6gKeg!2e0!5s20190501T000000!7i16384!8i8192",null,null,null,null,null,"No changes in type",null,null,"SV Jun 2021: https://www.google.ca/maps/@43.6585353,-79.3845936,3a,75y,76.88h,82.65t/data=!3m7!1e1!3m5!1sOYE9BajGhYJvRvFhRFMajw!2e0!5s20210601T000000!7i16384!8i8192?entry=ttu",null,null,null,null,"Upgraded to curb protected, PBL both sides of road. Seen under construiction Oct 2012 from sat imagery, see completed summer 2013. Will put 2013",null,"Sv Oct 2014: https://www.google.ca/maps/@43.6588471,-79.4228461,3a,75y,81.87h,90t/data=!3m7!1e1!3m5!1sRjQxW1jDdXi0mzyOhjyhsg!2e0!5s20141001T000000!7i13312!8i6656?entry=ttu; PBL upgrade between Oct 2020 - Jun 2021, SV jun 2021: https://www.google.ca/maps/","Relevant article: https://www.blogto.com/city/2014/05/how_are_the_new_wellesley_st_bike_lanes_working_out/"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,2021,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"PBL",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Upgraded to PBL, request sent Nov 2020, to be completed within first 2 quarters of 2021: https://secure.toronto.ca/council/agenda-item.do?item=2020.IE17.4",null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[0.3260056260085661,0.2365338374156605,0.2255538199681325,0.1126664163621408,0.2250246425899875,0.1792343492794323,0.2726858376752154,0.300393681248329,0.05949573325960352,0.157697515776334,0.1573492377644717,0.1088756048583633,0.05011355735783798,0.4448062787022363,0.05176951194964206,0.09015835097798248,0.2010428545360727,0.2103280821878017,0.5488315324171582,0.2066411735820967,0.1056675596747196,0.2263970344858969,2.18171213870454,1.303230045911483,0.3082822146450506,0.5950118939211231,0.938686040659128,0.2512233341740692,0.7727766593866777,0.3975616538094821,0.7822607412803214,0.7654429462465299,0.370983251546561,0.4083351406794274,0.7068092391922541,0.6850188161523674,1.303443066695497,2.235747528926041,1.069790859384054,0.1473752173158572,0.3396104596233372,0.2326057922729558,1.465309271173591,1.823491010157717,0.8207686627352462,1.118725773371709,2.547181451916014,0.02720903730392289,2.180095569005042,0.8474101859216474],["PBL","PL","PL","PL","PBL","PL","PL","PBL","PL","PL","PL","PL","PL","PL","PL","PL","PL","BUF","PL","BUF","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PBL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PL","PBL","PL","PL","BUF","PL","PBL","PL","PBL","PBL"],[2021,2015,2015,2015,2015,2007,2007,2017,2007,2016,2016,2001,2007,2009,2009,2007,2009,2009,2016,2021,2013,2013,2007,2009,2009,2007,2009,2007,2007,2009,2022,2007,2001,2007,2007,2007,2007,2009,2009,2007,2007,2020,2007,2007,2009,2007,2013,2014,2021,2014]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>street<\/th>\n      <th>street_from<\/th>\n      <th>street_to<\/th>\n      <th>road_type<\/th>\n      <th>road_type_recode<\/th>\n      <th>install_year<\/th>\n      <th>install_type<\/th>\n      <th>verify_install_year<\/th>\n      <th>verify_install_date<\/th>\n      <th>verify_install_type<\/th>\n      <th>verify_install_comment<\/th>\n      <th>verify_upgrade1_year<\/th>\n      <th>verify_upgrade1_date<\/th>\n      <th>verify_upgrade1_type<\/th>\n      <th>verify_upgrade1_comment<\/th>\n      <th>verify_upgrade2_year<\/th>\n      <th>verify_upgrade2_date<\/th>\n      <th>verify_upgrade2_type<\/th>\n      <th>verify_upgrade2_comment<\/th>\n      <th>verify_misclass<\/th>\n      <th>geometry_len_km<\/th>\n      <th>verify_final_type<\/th>\n      <th>verify_final_year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[7,9,13,17,22,24]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"street","targets":2},{"name":"street_from","targets":3},{"name":"street_to","targets":4},{"name":"road_type","targets":5},{"name":"road_type_recode","targets":6},{"name":"install_year","targets":7},{"name":"install_type","targets":8},{"name":"verify_install_year","targets":9},{"name":"verify_install_date","targets":10},{"name":"verify_install_type","targets":11},{"name":"verify_install_comment","targets":12},{"name":"verify_upgrade1_year","targets":13},{"name":"verify_upgrade1_date","targets":14},{"name":"verify_upgrade1_type","targets":15},{"name":"verify_upgrade1_comment","targets":16},{"name":"verify_upgrade2_year","targets":17},{"name":"verify_upgrade2_date","targets":18},{"name":"verify_upgrade2_type","targets":19},{"name":"verify_upgrade2_comment","targets":20},{"name":"verify_misclass","targets":21},{"name":"geometry_len_km","targets":22},{"name":"verify_final_type","targets":23},{"name":"verify_final_year","targets":24}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="collisions" class="level2">
<h2 class="anchored" data-anchor-id="collisions">Collisions</h2>
<p>Preview the first 50 rows of the collisions data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>crash_raw <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    as_tibble <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    datatable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-dbcdbc37321785fd7050" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dbcdbc37321785fd7050">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["218020867","218020867","218021136","218021211","218021211","218021236","218021212","218021316","218021398","218021316","218021341","218021398","218021262","218021341","218021511","218021513","218021513","218021594","218021567","218021569","218021659","218021660","218021660","218021692","218021660","218021785","218021785","218021836","218022093","218021839","218021889","218022026","218022026","218022073","218022117","218022121","218022118","218022242","218022150","218022170","218022242","218022150","218022243","218023261","218022243","218022243","218022270","218022548","218022243","218022244"],["2021-09-08 00:00:00","2021-09-08 00:00:00","2021-09-09 00:00:00","2021-09-10 00:00:00","2021-09-10 00:00:00","2021-09-10 00:00:00","2021-09-10 00:00:00","2021-09-11 00:00:00","2021-09-12 00:00:00","2021-09-11 00:00:00","2021-09-11 00:00:00","2021-09-12 00:00:00","2021-09-10 00:00:00","2021-09-11 00:00:00","2021-09-13 00:00:00","2021-09-13 00:00:00","2021-09-13 00:00:00","2021-09-14 00:00:00","2021-09-14 00:00:00","2021-09-10 00:00:00","2021-09-14 00:00:00","2021-09-14 00:00:00","2021-09-14 00:00:00","2021-09-14 00:00:00","2021-09-14 00:00:00","2021-09-15 00:00:00","2021-09-15 00:00:00","2021-09-16 00:00:00","2021-09-18 00:00:00","2021-09-15 00:00:00","2021-09-15 00:00:00","2021-09-17 00:00:00","2021-09-17 00:00:00","2021-09-17 00:00:00","2021-09-17 00:00:00","2021-09-17 00:00:00","2021-09-15 00:00:00","2021-09-19 00:00:00","2021-09-18 00:00:00","2021-09-18 00:00:00","2021-09-19 00:00:00","2021-09-18 00:00:00","2021-09-19 00:00:00","2021-09-26 00:00:00","2021-09-19 00:00:00","2021-09-19 00:00:00","2021-09-17 00:00:00","2021-09-16 00:00:00","2021-09-19 00:00:00","2021-09-19 00:00:00"],["3","3","4","5","5","5","5","6","7","6","6","7","5","6","1","1","1","2","2","5","2","2","2","2","2","3","3","4","6","3","3","5","5","5","5","5","3","7","6","6","7","6","7","7","7","7","5","4","7","7"],["1300","1300","2035","1725","1725","0200","1634","1500","1430","1500","1620","1430","1100","1620","1535","1520","1520","0930","0530","1200","1430","1730","1730","1545","1730","1825","1825","0925","0100","2330","2100","1550","1550","1720","2245","1900","1400","1215","1530","1645","1215","1530","1315","0800","1315","1315","2125","1130","1315","1300"],["LAWRENCE AVE E","LAWRENCE AVE E","3000 STEELES AVE E","BRIMLEY RD","BRIMLEY RD","GARDINER EXPY","BILLY BISHOP WAY","ISLINGTON AVE","LAKE SHORE BLVD W","ISLINGTON AVE","OVERLEA BLVD","LAKE SHORE BLVD W","161 SPRINGDALE BLVD","OVERLEA BLVD","EGLINTON AVE E","JANE ST","JANE ST","WESTON RD","ONTARIO DVP","JANE ST","GARDINER EXPY","ALBION RD","ALBION RD","EDDYSTONE AVE","ALBION RD","WILSON AVE","WILSON AVE","YORKTOWN DR YORK TORONTO","WESTON RD","GEORGE ST","DON VALLEY PARKWAY","MARTIN GROVE RD","MARTIN GROVE RD","SHEPPARD AVE","STEELES AVE E","5 SAINT JOSEPH ST","DONVALLEY PARKWAY","FINCH AVE E","WARDEN AVE","MORNINGSIDE AVE","FINCH AVE E","WARDEN AVE","DON VALLEY PARKWAY","DUNDAS ST W","DON VALLEY PARKWAY","DON VALLEY PARKWAY","DON VALLEY PARKWAY","77 QUEBEC AVE","DON VALLEY PARKWAY","GARDINIER EXPRESSWAY"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["MCCOWAN RD","MCCOWAN RD","IFO","TRITON RD","TRITON RD","YORK STREET","WILSON AVE NORTH YORK TORONTO","ALLENBY AVE","JAMESON AVE","ALLENBY AVE","DON MILLS RD","JAMESON AVE","NULL","DON MILLS RD","LESLIE ST","KING ST","KING ST","FINCH AVE W NORTH YORK TORONTO","DONMILLS RD","BLACK CREEK BLVD","LOWER SIMCOE","STEELES AVE W","STEELES AVE W","JANE ST","STEELES AVE W","DUFFERIN ST NORTH YORK TORONTO","DUFFERIN ST NORTH YORK TORONTO","TRETHEWEY DR","FAIRGLEN CRES","ADELAIDE ST E","WYNFORD DRIVE","FINCH AVE W","FINCH AVE W","BRIMLEY RD","REESOR RD","IFO","DONMILLS RD","BRIMLEY RD","HWY 401","FINCH AVE E","BRIMLEY RD","HWY 401","NULL","SPADINA AVE.","NULL","NULL","NULL","BLOOR ST W","NULL","STRACHAN AVE"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["03","03","03","03","03","03","02","03","03","03","03","03","03","03","03","03","03","03","03","03","03","02","02","03","02","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03","03"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","07","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","03","01","01","01","01","01","01","01","01","01","01","01","01","01"],["02","01","02","02","01","02","01","01","02","02","02","01","01","01","01","02","01","02","01","01","01","01","02","01","03","02","01","01","02","01","02","02","03","02","01","01","01","02","03","02","01","02","01","02","02","04","01","01","03","01"],["01","05","01","01","01","01","01","01","01","01","01","01","01","01","01","06","01","05","01","01","06","01","01","01","09","01","01","17","01","01","01","01","01","01","01","01","01","01","01","01","01","05","05","01","01","01","01","01","04","01"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["04","04","04","01","02","04","01","01","04","01","02","04","04","01","03","04","01","02","01","03","04","01","01","04","01","03","03","04","01","01","01","01","01","03","03","03","02","03","01","02","03","01","02","04","02","02","02","02","02","04"],["09","09","04","04","04","04","05","03","05","03","05","05","06","05","03","05","05","09","04","03","03","03","03","03","03","03","03","05","05","06","03","03","03","05","03","06","03","03","09","03","03","09","09","06","09","09","04","06","09","04"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","02","01","01"],["98","98","98","01","98","98","98","98","98","98","98","01","98","98","98","98","98","98","98","98","98","01","01","98","01","98","98","98","98","98","98","01","98","98","98","98","00","98","98","98","98","01","01","98","01","01","98","98","01","98"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["02","01","02","02","01","02","01","01","02","02","02","01","01","01","01","02","01","02","01","01","01","01","02","01","03","02","01","01","02","01","02","02","03","02","01","01","01","02","03","02","01","02","01","02","02","04","01","01","03","01"],["01","02","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","02","01","01","01","01","01","01","02","01","01","NULL","01","01","01","01","01","01","01","01","01","01","01","01","01","02","02","01","01","01","01","01","01","01"],["80","72","39","45","44","74","39","53","39","57","62","42","56","68","25","41","45","50","42","40","28","26","31","29","27","52","28","52","23","53","43","42","25","27","45","24","49","35","28","66","53","45","53","27","61","75","31","46","62","22"],["0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["01","01","01","01","01","01","01","01","06","01","01","01","99","01","01","01","01","01","01","01","01","01","01","01","01","01","01","99","01","99","01","01","01","01","01","99","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["01","01","01","01","01","01","01","01","01","01","01","01","99","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","99","01","01","01","01","01","99","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["01","01","08","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","02","02","01","02","05","05","01","08","08","07","01","01","01","07","06","01","01","01","01","01","01","01","01","01","01","08","01","01","01"],["01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01","01"],["07","01","08","01","01","07","01","01","04","10","05","01","11","04","02","04","02","01","01","10","10","10","01","01","01","02","02","04","04","11","02","10","01","01","02","11","08","10","10","02","01","01","02","08","01","02","08","09","10","01"],[-79.245664,-79.245664,-79.347909,-79.262596,-79.262596,-79.44903499999999,-79.471187,-79.553481,-79.434786,-79.553481,-79.345277,-79.434786,-79.32466100000001,-79.345277,-79.349994,-79.53688200000001,-79.53688200000001,-79.5008,-79.341133,-79.496385,-79.38401399999999,-79.639382,-79.639382,-79.515792,-79.639382,-79.47073,-79.47073,-79.478104,-79.56128200000001,-79.371262,-79.33127399999999,-79.591775,-79.591775,-79.265939,-79.295422,-79.385887,-79.332482,-79.277575,-79.304036,-79.22120099999999,-79.277575,-79.304036,-79.33127399999999,-79.398364,-79.33127399999999,-79.33127399999999,-79.33127399999999,-79.467478,-79.33127399999999,-79.44903499999999],[43.755496,43.755496,43.814875,43.773294,43.773294,43.638174,43.729659,43.711386,43.633359,43.711386,43.742922,43.633359,43.687298,43.742922,43.716934,43.849954,43.849954,43.760876,43.744802,43.677178,43.641867,43.7498,43.7498,43.749109,43.7498,43.72976,43.72976,43.692231,43.84669,43.651562,43.731363,43.736732,43.736732,43.649955,43.826395,43.665713,43.739613,43.805636,43.769914,43.819595,43.805636,43.769914,43.731363,43.652867,43.731363,43.731363,43.731363,43.655307,43.731363,43.638174],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1","-1"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"],["NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL","NULL"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ACCNB<\/th>\n      <th>ACCDATE<\/th>\n      <th>DAY_NO<\/th>\n      <th>ACCTIME<\/th>\n      <th>STNAME1<\/th>\n      <th>STREETYPE1<\/th>\n      <th>DIR1<\/th>\n      <th>STNAME2<\/th>\n      <th>STREETYPE2<\/th>\n      <th>DIR2<\/th>\n      <th>STNAME3<\/th>\n      <th>STREETYPE3<\/th>\n      <th>DIR3<\/th>\n      <th>MUNICIPAL<\/th>\n      <th>LOCCOORD<\/th>\n      <th>ACCLASS<\/th>\n      <th>ACCLOC<\/th>\n      <th>TRAFFICTL<\/th>\n      <th>VEH_NO<\/th>\n      <th>VEHTYPE<\/th>\n      <th>TOWEDVEH<\/th>\n      <th>INITDIR<\/th>\n      <th>IMPACTYPE<\/th>\n      <th>IMPLOC<\/th>\n      <th>EVENT1<\/th>\n      <th>EVENT2<\/th>\n      <th>EVENT3<\/th>\n      <th>PER_NO<\/th>\n      <th>INVTYPE<\/th>\n      <th>INVAGE<\/th>\n      <th>INJURY<\/th>\n      <th>SAFEQUIP<\/th>\n      <th>DRIVACT<\/th>\n      <th>DRIVCOND<\/th>\n      <th>PEDCOND<\/th>\n      <th>PEDACT<\/th>\n      <th>VISIBLE<\/th>\n      <th>LIGHT<\/th>\n      <th>RDSFCOND<\/th>\n      <th>MANOEUVER<\/th>\n      <th>LONGITUDE<\/th>\n      <th>LATITUDE<\/th>\n      <th>CHANGED<\/th>\n      <th>PRIVATE_PROPERTY<\/th>\n      <th>ROAD_CLASS<\/th>\n      <th>YEAR<\/th>\n      <th>PEDTYPE<\/th>\n      <th>CYCLISTYPE<\/th>\n      <th>CYCACT<\/th>\n      <th>CYCCOND<\/th>\n      <th>MVAIMG<\/th>\n      <th>ACTUAL_SPEED<\/th>\n      <th>POSTED_SPEED<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[41,42]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"ACCNB","targets":1},{"name":"ACCDATE","targets":2},{"name":"DAY_NO","targets":3},{"name":"ACCTIME","targets":4},{"name":"STNAME1","targets":5},{"name":"STREETYPE1","targets":6},{"name":"DIR1","targets":7},{"name":"STNAME2","targets":8},{"name":"STREETYPE2","targets":9},{"name":"DIR2","targets":10},{"name":"STNAME3","targets":11},{"name":"STREETYPE3","targets":12},{"name":"DIR3","targets":13},{"name":"MUNICIPAL","targets":14},{"name":"LOCCOORD","targets":15},{"name":"ACCLASS","targets":16},{"name":"ACCLOC","targets":17},{"name":"TRAFFICTL","targets":18},{"name":"VEH_NO","targets":19},{"name":"VEHTYPE","targets":20},{"name":"TOWEDVEH","targets":21},{"name":"INITDIR","targets":22},{"name":"IMPACTYPE","targets":23},{"name":"IMPLOC","targets":24},{"name":"EVENT1","targets":25},{"name":"EVENT2","targets":26},{"name":"EVENT3","targets":27},{"name":"PER_NO","targets":28},{"name":"INVTYPE","targets":29},{"name":"INVAGE","targets":30},{"name":"INJURY","targets":31},{"name":"SAFEQUIP","targets":32},{"name":"DRIVACT","targets":33},{"name":"DRIVCOND","targets":34},{"name":"PEDCOND","targets":35},{"name":"PEDACT","targets":36},{"name":"VISIBLE","targets":37},{"name":"LIGHT","targets":38},{"name":"RDSFCOND","targets":39},{"name":"MANOEUVER","targets":40},{"name":"LONGITUDE","targets":41},{"name":"LATITUDE","targets":42},{"name":"CHANGED","targets":43},{"name":"PRIVATE_PROPERTY","targets":44},{"name":"ROAD_CLASS","targets":45},{"name":"YEAR","targets":46},{"name":"PEDTYPE","targets":47},{"name":"CYCLISTYPE","targets":48},{"name":"CYCACT","targets":49},{"name":"CYCCOND","targets":50},{"name":"MVAIMG","targets":51},{"name":"ACTUAL_SPEED","targets":52},{"name":"POSTED_SPEED","targets":53}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="preprocessing" class="level1">
<h1>Preprocessing</h1>
<p>Preprocess bikeways and collisions data, re-projecting coordinate reference systems to EPSG:4326 and adding a cropped downtown version of each dataset.</p>
<p>For the bikeways, create one row per event (install, upgrade 1, or upgrade 2), and calculate the length of each bikeway in kilometers.</p>
<p>For collisions, filter for individuals with injuries only and within the boundaries of the City of Toronto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reproject crs to 4326</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>bounds <span class="ot">&lt;-</span> bounds_raw <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>bike <span class="ot">&lt;-</span> bike_raw <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>crash <span class="ot">&lt;-</span> crash_raw <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="dv">4326</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocess bikeways</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>bike <span class="ot">&lt;-</span> bike_raw <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersection</span>(bounds) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>( <span class="co"># lower case before standardizing</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            verify_install_type,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            verify_upgrade1_type,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            verify_upgrade2_type</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> <span class="fu">str_to_lower</span>(.x)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>( <span class="co"># standardize infra types</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">c</span>(</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>            verify_install_type,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            verify_upgrade1_type,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            verify_upgrade2_type</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>            .x <span class="sc">==</span> <span class="st">"pl"</span> <span class="sc">~</span> <span class="st">"painted lane"</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>            .x <span class="sc">==</span> <span class="st">"buf"</span> <span class="sc">~</span> <span class="st">"buffered lane"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>            .x <span class="sc">==</span> <span class="st">"pbl"</span> <span class="sc">~</span> <span class="st">"cycle track"</span>,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>            .x <span class="sc">==</span> <span class="st">"sr"</span> <span class="sc">~</span> <span class="st">"shared road"</span>,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>            .x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"none"</span>, <span class="st">"n"</span>) <span class="sc">~</span> <span class="st">"none"</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>( <span class="co"># cols to pivot</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">pivot_install_type =</span> verify_install_type,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">pivot_upgrade1_type =</span> verify_upgrade1_type,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">pivot_upgrade2_type =</span> verify_upgrade2_type</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>( <span class="co"># one row per event</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"pivot_"</span>),</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">"event"</span>,</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">"event_type"</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>( <span class="co"># extract event, year, and len</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">event =</span> <span class="fu">str_split_i</span>(event, <span class="st">"_"</span>, <span class="dv">2</span>),</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">event_year =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>            event <span class="sc">==</span> <span class="st">"install"</span> <span class="sc">~</span> verify_install_year,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>            event <span class="sc">==</span> <span class="st">"upgrade1"</span> <span class="sc">~</span> verify_upgrade1_year,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>            event <span class="sc">==</span> <span class="st">"upgrade2"</span> <span class="sc">~</span> verify_upgrade2_year,</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>            <span class="at">.default =</span> <span class="cn">NA</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">len_km =</span> <span class="fu">as.numeric</span>(<span class="fu">st_length</span>(geometry)) <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(event_type) <span class="sc">&amp;</span> <span class="co"># only events that exist</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span>( <span class="co"># remove non-cycling infra installs</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>            event <span class="sc">==</span> <span class="st">"install"</span> <span class="sc">&amp;</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>            <span class="sc">!</span>event_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"painted lane"</span>, <span class="st">"buffered lane"</span>, <span class="st">"cycle track"</span>)</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocess crashes</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>crash <span class="ot">&lt;-</span> crash <span class="sc">%&gt;%</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_intersection</span>(bounds) <span class="sc">%&gt;%</span> <span class="co"># ensure coords are within toronto</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>( <span class="co"># create standard cols</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>        <span class="at">date =</span> <span class="fu">as_date</span>(ACCDATE), <span class="co"># date col</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>        <span class="at">longitude =</span> <span class="fu">st_coordinates</span>(geometry)[, <span class="dv">1</span>], <span class="co"># long col</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">latitude =</span> <span class="fu">st_coordinates</span>(geometry)[, <span class="dv">2</span>], <span class="co"># lat col</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>        <span class="at">injury =</span> <span class="fu">case_when</span>( <span class="co"># injury type col</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>            INJURY <span class="sc">==</span> <span class="st">"0"</span> <span class="sc">~</span> <span class="st">"none"</span>,</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>            INJURY <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">~</span> <span class="st">"minimal"</span>,</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>            INJURY <span class="sc">==</span> <span class="st">"2"</span> <span class="sc">~</span> <span class="st">"minor"</span>,</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>            INJURY <span class="sc">==</span> <span class="st">"3"</span> <span class="sc">~</span> <span class="st">"major"</span>,</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>            INJURY <span class="sc">==</span> <span class="st">"4"</span> <span class="sc">~</span> <span class="st">"fatal"</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>        <span class="at">user =</span> <span class="fu">case_when</span>( <span class="co"># road user col</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>            INVTYPE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"01"</span>, <span class="st">"02"</span>) <span class="sc">~</span> <span class="st">"driver"</span>,</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>            INVTYPE <span class="sc">==</span> <span class="st">"03"</span> <span class="sc">~</span> <span class="st">"pedestrian"</span>,</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>            INVTYPE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"04"</span>, <span class="st">"05"</span>) <span class="sc">~</span> <span class="st">"cyclist"</span>,</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>            <span class="at">.default =</span> <span class="st">"other"</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(injury <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"minimal"</span>, <span class="st">"minor"</span>, <span class="st">"major"</span>, <span class="st">"fatal"</span>)) <span class="co"># injuries only</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Downtown bounding box</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>bounds_downtown <span class="ot">&lt;-</span> <span class="fu">st_as_sfc</span>(</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">st_bbox</span>(<span class="fu">c</span>(</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmin =</span> <span class="sc">-</span><span class="fl">79.300395</span>,</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymin =</span> <span class="fl">43.636621</span>,</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">xmax =</span> <span class="sc">-</span><span class="fl">79.489565</span>,</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymax =</span> <span class="fl">43.698150</span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>    )),</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">crs =</span> <span class="dv">4326</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Downtown data</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>bike_downtown <span class="ot">&lt;-</span> bike <span class="sc">%&gt;%</span> <span class="fu">st_crop</span>(bounds_downtown)</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>crash_downtown <span class="ot">&lt;-</span> crash <span class="sc">%&gt;%</span> <span class="fu">st_crop</span>(bounds_downtown)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploration" class="level1">
<h1>Exploration</h1>
<section id="events" class="level2">
<h2 class="anchored" data-anchor-id="events">Events</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stacked bar plot of infra types installed/upgraded per year</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    bike,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> event_year, <span class="at">fill =</span> event_type)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">min</span>(bike<span class="sc">$</span>event_year, <span class="at">na.rm =</span> T)<span class="sc">:</span><span class="fu">max</span>(bike<span class="sc">$</span>event_year, <span class="at">na.rm =</span> T)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">"Cycling Infrastructure Installed/Upgraded Per Year"</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">6</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="experiment-2024-01-25_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="heatmaps" class="level2">
<h2 class="anchored" data-anchor-id="heatmaps">Heatmaps</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">City</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Downtown</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Heatmap of city</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    crash,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density_2d_filled</span>(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">contour_var =</span> <span class="st">"count"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layer_spatial</span>(</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        bounds,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">alpha =</span> <span class="dv">0</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"lightgray"</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">vars</span>(<span class="fu">year</span>(date))</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="experiment-2024-01-25_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Heatmap of downtown</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    crash_downtown,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density_2d_filled</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">contour_var =</span> <span class="st">"count"</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">vars</span>(<span class="fu">year</span>(date))</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="experiment-2024-01-25_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>